<odoo>

    <!-- ========================= -->
    <!-- TREE VIEW -->
    <!-- ========================= -->
    <record id="view_staff_journal_tree" model="ir.ui.view">
        <field name="name">staff.journal.tree</field>
        <field name="model">staff.journal</field>
        <field name="arch" type="xml">
            <tree string="Jurnal Harian" create="false">
                <field name="date"/>
                <field name="employee_id"/>
                <field name="department_id"/>
                <field name="work_duration"/>
                <field name="state"/>
            </tree>
        </field>
    </record>

    <!-- ========================= -->
    <!-- FORM VIEW -->
    <!-- ========================= -->
    <record id="view_staff_journal_form" model="ir.ui.view">
        <field name="name">staff.journal.form</field>
        <field name="model">staff.journal</field>
        <field name="arch" type="xml">
            <form string="Jurnal Harian">
                <!-- HEADER -->
                <header>
                    <field name="state" widget="statusbar"/>

                    <button name="action_submit"
                            type="object"
                            string="Submit"
                            class="btn-primary"
                            invisible="state in ['submitted', 'approved']"/>

                    <button name="action_approve"
                            type="object"
                            string="Approve"
                            groups="hr.group_hr_manager"
                            class="btn-success"
                            invisible="state in ['draft', 'approved']"/>
                </header>

                <sheet>
                    <!-- IDENTITAS & WAKTU -->
                    <group>
                        <group>
                            <field name="employee_id" readonly="1"/>
                            <field name="department_id" readonly="1"/>
                            <field name="date" readonly="1"/>
                        </group>

                        <group>
                            <field name="check_in" readonly="1"/>
                            <field name="check_out" readonly="1"/>
                            <field name="work_duration" readonly="1"/>
                        </group>
                    </group>

                    <!-- ISI JURNAL -->
                    <notebook>
                        <page string="Daily Report">
                            <group>
                                <field name="target_today"
                                       placeholder="Tuliskan rencana kerja hari ini..."
                                       readonly="state in ['submitted', 'approved']"/>

                                <field name="progress_today"
                                       placeholder="Tuliskan hasil yang sudah dikerjakan..."
                                       readonly="state in ['submitted', 'approved']"/>

                                <field name="obstacles"
                                       placeholder="Jika ada tuliskan kendalanya, kalau tidak tulis 'Tidak ada'"
                                       readonly="state in ['submitted', 'approved']"/>

                                <field name="plan_tomorrow"
                                       placeholder="Tuliskan rencana kerja besok..."
                                       readonly="state in ['submitted', 'approved']"/>

                                <field name="additional_notes"
                                       placeholder="Opsional, jika ada ide/masukan"
                                       readonly="state in ['submitted', 'approved']"/>
                            </group>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <!-- ========================= -->
    <!-- SEARCH VIEW -->
    <!-- ========================= -->
    <record id="view_staff_journal_search" model="ir.ui.view">
        <field name="name">staff.journal.search</field>
        <field name="model">staff.journal</field>
        <field name="arch" type="xml">
            <search string="Cari Jurnal">
                <field name="employee_id"/>
                <field name="department_id"/>
                <filter string="Draft" name="draft" domain="[('state', '=', 'draft')]"/>
                <filter string="Submitted" name="submitted" domain="[('state', '=', 'submitted')]"/>
                <group expand="1" string="Group By">
                    <filter string="Pegawai" name="employee" context="{'group_by':'employee_id'}"/>
                    <filter string="Divisi" name="department" context="{'group_by':'department_id'}"/>
                    <filter string="Status" name="status" context="{'group_by':'state'}"/>
                </group>
            </search>
        </field>
    </record>

    <!-- ========================= -->
    <!-- GRAPH VIEW -->
    <!-- ========================= -->
    <record id="view_staff_journal_graph" model="ir.ui.view">
        <field name="name">staff.journal.graph</field>
        <field name="model">staff.journal</field>
        <field name="arch" type="xml">
            <graph string="Analisa Jurnal" type="bar">
                <field name="employee_id"/>
                <field name="work_duration" type="measure"/>
            </graph>
        </field>
    </record>

    <!-- ========================= -->
    <!-- PIVOT VIEW -->
    <!-- ========================= -->
    <record id="view_staff_journal_pivot" model="ir.ui.view">
        <field name="name">staff.journal.pivot</field>
        <field name="model">staff.journal</field>
        <field name="arch" type="xml">
            <pivot string="Analisa Jurnal">
                <field name="employee_id" type="row"/>
                <field name="date" type="col" interval="day"/>
                <field name="work_duration" type="measure"/>
            </pivot>
        </field>
    </record>

    <!-- ========================= -->
    <!-- DETAILED TREE VIEW (FOR EXPORT) -->
    <!-- ========================= -->
    <record id="view_staff_journal_tree_detailed" model="ir.ui.view">
        <field name="name">staff.journal.tree.detailed</field>
        <field name="model">staff.journal</field>
        <field name="arch" type="xml">
            <tree string="Detail Jurnal" create="false">
                <field name="date"/>
                <field name="employee_id"/>
                <field name="department_id"/>
                <field name="check_in"/>
                <field name="check_out"/>
                <field name="work_duration"/>
                <field name="state"/>
                <field name="target_today"/>
                <field name="progress_today"/>
                <field name="obstacles"/>
                <field name="plan_tomorrow"/>
                <field name="additional_notes"/>
            </tree>
        </field>
    </record>

    <!-- ========================= -->
    <!-- ACTION -->
    <!-- ========================= -->
    <record id="action_staff_journal_user" model="ir.actions.act_window">
        <field name="name">Jurnal Harian Saya</field>
        <field name="res_model">staff.journal</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[('employee_id.user_id', '=', uid)]</field>
        <field name="context">{}</field>
    </record>

    <record id="action_staff_journal_manager" model="ir.actions.act_window">
        <field name="name">Semua Jurnal</field>
        <field name="res_model">staff.journal</field>
        <field name="view_mode">tree,form,graph,pivot</field>
        <field name="search_view_id" ref="view_staff_journal_search"/>
        <field name="context">{}</field>
    </record>

    <!-- ========================= -->
    <!-- MENU -->
    <!-- ========================= -->
    <menuitem id="menu_staff_journal_root"
              name="Jurnal Harian"
              sequence="10"/>

    <menuitem id="menu_staff_journal_user"
              name="Jurnal Saya"
              parent="menu_staff_journal_root"
              action="action_staff_journal_user"
              sequence="10"/>

    <menuitem id="menu_staff_journal_manager"
              name="Semua Jurnal"
              parent="menu_staff_journal_root"
              action="action_staff_journal_manager"
              groups="hr.group_hr_manager"
              sequence="20"/>

    <record id="action_staff_journal_detailed" model="ir.actions.act_window">
        <field name="name">Laporan Detail</field>
        <field name="res_model">staff.journal</field>
        <field name="view_mode">tree,form</field>
        <field name="view_id" ref="view_staff_journal_tree_detailed"/>
        <field name="search_view_id" ref="view_staff_journal_search"/>
        <field name="context">{}</field>
    </record>

    <menuitem id="menu_staff_journal_detailed"
              name="Laporan Detail"
              parent="menu_staff_journal_root"
              action="action_staff_journal_detailed"
              groups="hr.group_hr_manager"
              sequence="30"/>

</odoo>
